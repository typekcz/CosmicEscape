<!DOCTYPE html>
<html lang="cs">
<head>
    <title>Cosmic Escape</title>
    <meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script type="text/javascript" src="js/jquery/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="js/jquery/jquery.mobile-1.4.5.min.js"></script>
	<script type="text/javascript" src="js/game.js"></script>
	<script type="text/javascript" src="js/entity.js"></script>
</head>
<body>
	<div data-role="page" id="menu">
		<div data-role="header">
		  <h1>Cosmic Escape</h1>
		</div>
		<div data-role="main" class="ui-content">
			<a href="#game" class="ui-btn">Start</a>
			<button onclick="navigator.app.exitApp()">Quit</button>
		</div>
		<div data-role="footer">
		  <h1>Lukáš Kotržena - KOT0200</h1>
		</div>
	</div>
	<div data-role="page" id="game">
		<canvas></canvas>
		<script type="text/javascript" src="js/assets.js"></script>
		<script type="text/javascript" src="js/entityPresets.js"></script>
		<script type="text/javascript">
			var game = new Game(document.querySelector("#game canvas"));
			Entity.prototype.game = game;
			
			window.onkeydown = function(event){
				switch(event.keyCode){
					case 87: // Up
						game.controls.up = true;
						break;
					case 83: // Down
						game.controls.down = true;
						break;
					case 65: // Left
						game.controls.left = true;
						break;
					case 68: // Right
						game.controls.right = true;
						break;
					case 32: // Space
						game.controls.shoot = true;
						break;
				}
			}
			
			window.onkeyup = function(event){
				switch(event.keyCode){
					case 87: // Up
						game.controls.up = false;
						break;
					case 83: // Down
						game.controls.down = false;
						break;
					case 65: // Left
						game.controls.left = false;
						break;
					case 68: // Right
						game.controls.right = false;
						break;
					case 32: // Space
						game.controls.shoot = false;
						break;
				}
			}
			
			game.update();
			game.draw();
			
			var pause = false;
			setInterval(function(){
				if(pause) return;
				game.update();
				game.draw();
			}, 1000/30);
		</script>
	</div>
</body>
</html>
